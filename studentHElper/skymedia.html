<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SkyDrop - Media (X.com style)</title>

  <style>
    :root{
      --bg:#0d0d0d;
      --panel:#121212;
      --muted:#9aa0a6;
      --accent:#1d9bf0;
      --card:#141414;
      --border:#555; /* darker for more visible lines */
      --text:#e6e6e6;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
    }

    .app{display:flex;justify-content:center;max-width:1350px;margin:0 auto;gap:18px;padding:18px;box-sizing:border-box;}
    .left{width:260px;display:flex;flex-direction:column;position:sticky;top:18px;border-right:2px solid var(--border);padding:18px 12px 80px;box-sizing:border-box;background:transparent;align-items:flex-start;height: calc(100vh - 36px);}
    .brand{display:flex;align-items:center;gap:12px;cursor:pointer;text-decoration:none;color:inherit;}
    .brand img{width:60px;height:60px;object-fit:contain;}
    .brand .title{font-weight:800;font-size:20px}
    .nav{display:flex;flex-direction:column;margin-top:18px;gap:14px;font-size:20px; width:100%;}
    .nav a{color:#bfc6c9;text-decoration:none;display:flex;align-items:center;gap:12px;padding:12px;border-radius:999px;width:100%;box-sizing:border-box;transition: color .15s ease, background .15s ease;}
    .nav a:hover{color:var(--accent);background: rgba(29,155,240,0.06);}
    .nav a.active{color:#fff;background: rgba(255,255,255,0.08);}
    .nav a svg{width:26px;height:26px;fill:#bfc6c9;transition:fill 0.2s ease;}
    .nav a:hover svg{fill:var(--accent);}
    .profile-area{margin-top:auto;display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;cursor:pointer;background:var(--card);width:calc(100% - 12px);box-sizing:border-box;}
    .profile-area img{width:44px;height:44px;border-radius:50%;object-fit:cover;}
    .profile-area .name{font-weight:600;font-size:14px;}
    .profile-area .handle{font-size:12px;color:var(--muted);}
    .center{flex:1;max-width:760px;margin-left:0;padding:6px 12px;border-right:2px solid var(--border);box-sizing:border-box;}
    .composer{background:var(--card);padding:14px;border-radius:12px;margin-bottom:18px;display:flex;gap:10px;align-items:flex-start;}
    .composer img{width:48px;height:48px;border-radius:50%;object-fit:cover;}
    .composer textarea{width:100%;background:transparent;border:1px solid var(--border);resize:none;color:var(--text);min-height:64px;font-size:16px;outline:none;border-radius:12px;padding:10px;}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:999px;border:0;cursor:pointer;font-weight:600;}
    .btn.secondary{background:transparent;border:1px solid #2a2a2a;color:var(--text);}
    .media-preview{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;}
    .media-preview .one{width:100%;height:360px;object-fit:cover;border-radius:12px;}
    .media-preview .two{width:calc(50% - 4px);height:260px;object-fit:cover;border-radius:12px;}
    .media-preview .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;width:100%;}
    .media-preview .grid img,.media-preview .grid video{width:100%;height:220px;object-fit:cover;border-radius:10px;}

    /* Slider Styling */
    .media-slider{position:relative;overflow:hidden;border-radius:12px;margin-top:10px;}
    .media-track{display:flex;transition:transform 0.3s ease;width:100%;}
    .media-slide{flex:0 0 100%;display:flex;justify-content:center;align-items:center;}
    .media-slide img,.media-slide video{width:100%;max-height:500px;object-fit:cover;border-radius:12px;}
    .slider-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.4);color:white;border:none;font-size:24px;padding:6px 10px;cursor:pointer;border-radius:50%;z-index:10;}
    .slider-btn.prev{left:10px;}
    .slider-btn.next{right:10px;}

    .post{background:var(--card);padding:14px;border-radius:12px;margin-bottom:12px;border:1px solid var(--border);}
    .post .head{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;}
    .post .user{display:flex;gap:10px;align-items:center;}
    .post .user img{width:48px;height:48px;border-radius:50%;object-fit:cover;}
    .post .meta{display:flex;flex-direction:column;}
    .post .meta .name{font-weight:700;}
    .post .meta .time{color:var(--muted);font-size:13px;margin-top:6px;}
    .post .dots{cursor:pointer;}
    .post .content{margin-top:10px;font-size:15px;line-height:1.4;}
    .post .media{margin-top:10px;border-radius:10px;overflow:hidden;}
    .post .media img,.post .media video{width:100%;height:auto;display:block;max-height:700px;object-fit:cover;}
    .post .actions{display:flex;gap:18px;margin-top:10px;color:var(--muted);align-items:center;}
    .action{display:flex;gap:8px;align-items:center;cursor:pointer;padding:6px;border-radius:8px;}
    .action:hover{background:rgba(255,255,255,0.02);color:var(--accent);}
    .right{width:300px;padding:18px 12px;box-sizing:border-box;display:flex;flex-direction:column;gap:12px;border-left:2px solid var(--border);}
    .contacts-header{display:flex;justify-content:space-between;align-items:center;}
    .contacts-title{font-weight:700;font-size:18px;}
    .fav-list{display:flex;flex-direction:column;gap:10px;overflow:auto;padding-right:6px;}
    .contact{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;cursor:pointer;}
    .contact img{width:40px;height:40px;border-radius:50%;object-fit:cover;}
    .searchbox{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;background:var(--card);border:1px solid var(--border);}
    .searchbox input{background:transparent;border:0;outline:none;color:var(--text);flex:1;}
    @media (max-width:980px){.left{display:none;}.right{display:none;}.center{margin-left:0;max-width:100%;}}
  </style>
</head>
<body>
  <div class="app">
    <aside class="left">
      <div>
        <a class="brand" id="homeLogo" href="index.html">
          <img src="images/logosk.png" alt="Sky logo" id="logoImg" />
        </a>
        <nav class="nav">
          <a href="#" data-link="home" class="active">
            <svg viewBox="0 0 24 24"><path d="M21.75 21V9.75L12 3 2.25 9.75V21h7.5v-6h5.5v6h6.5z"></path></svg> Home
          </a>
          <a href="#" data-link="notifications">
            <svg viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6V9c0-3.07-1.63-5.64-4.5-6.32V2.5a1.5 1.5 0 10-3 0v.18C7.63 3.36 6 5.92 6 9v7l-2 2v1h16v-1l-2-2z"></path></svg> Notifications
          </a>
          <a href="#" data-link="clubs">
            <svg viewBox="0 0 24 24"><path d="M12 3L2 9l10 6 10-6-10-6zm0 7l-10 6 10 6 10-6-10-6z"></path></svg> Clubs
          </a>
          <a href="#" data-link="messages">
            <svg viewBox="0 0 24 24"><path d="M20 2H4a2 2 0 00-2 2v16l4-4h14a2 2 0 002-2V4a2 2 0 00-2-2z"></path></svg> Messages
          </a>
          <a href="#" data-link="profile">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"></path></svg> Profile
          </a>
          <a href="#" data-link="settings">
            <svg viewBox="0 0 24 24"><path d="M19.14 12.94a7.952 7.952 0 000-1.88l2.03-1.58a.5.5 0 00.11-.64l-1.91-3.3a.5.5 0 00-.61-.22l-2.39.96a7.007 7.007 0 00-1.63-.94l-.36-2.65a.5.5 0 00-.5-.43h-3.82a.5.5 0 00-.5.43l-.36 2.65c-.59.24-1.14.56-1.63.94l-2.39-.96a.5.5 0 00-.61.22l-1.91 3.3a.5.5 0 00.11.64l2.03 1.58a7.952 7.952 0 000 1.88l-2.03 1.58a.5.5 0 00-.11.64l1.91 3.3c.14.24.43.33.68.22l2.39-.96c.49.38 1.04.7 1.63.94l.36 2.65c.04.26.25.43.5.43h3.82c.25 0 .46-.17.5-.43l.36-2.65c.59-.24 1.14-.56 1.63-.94l2.39.96c.25.11.54.02.68-.22l1.91-3.3a.5.5 0 00-.11-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 110-7 3.5 3.5 0 010 7z"></path></svg> Settings
          </a>
        </nav>
      </div>
      <div class="profile-area" id="leftProfile">
        <img src="images/profilephoto1.png" alt="Your profile" />
        <div>
          <div class="name">Rishikesh Shedge</div>
          <div class="handle">@rishikesh</div>
        </div>
      </div>
    </aside>

    <main class="center">
      <section class="composer">
        <img src="images/profilephoto1.png" alt="Rishikesh" />
        <textarea id="tweetText" placeholder="What's happening?" maxlength="400"></textarea>
        <div style="display:flex;align-items:center;gap:12px;margin-top:10px;">
          <label class="btn secondary">
            + Add media
            <input id="mediaInput" type="file" accept="image/*,video/*" multiple style="display:none"/>
          </label>
          <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
            <button class="btn" id="postBtn">Post</button>
          </div>
        </div>
        <div id="previewWrap" class="media-preview" style="margin-top:10px;"></div>
      </section>
      <section id="feed"></section>
    </main>

    <aside class="right">
      <div class="contacts-header"><div class="contacts-title">Favourites</div></div>
      <div class="fav-list" id="favList"></div>
      <div style="margin-top:auto;">
        <div class="searchbox">
          <svg width="18" height="18" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"></circle></svg>
          <input placeholder="Search Contact" />
        </div>
      </div>
    </aside>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const favorites = [
    {name:'Yash Mishra', handle:'@luffyy', avatar:'images/luffy.jpeg'},
    {name:'Atherva', handle:'@Athervacool', avatar:'images/boy1.jpg'},
    {name:'Abhishek', handle:'@abhiii', avatar:'images/be.jpg'},
    {name:'Director', handle:'@😊', avatar:'images/se.jpg'},
    {name:'Rahul Sharma', handle:'@rahul', avatar:'images/rahul.jpg'},
    {name:'Ananya Singh', handle:'@ananya', avatar:'images/ananya.jpg'},
    {name:'Rohan Gupta', handle:'@rohan', avatar:'images/rohan.jpg'},
    {name:'Priya Patel', handle:'@priya', avatar:'images/priya.jpg'}
  ];

  // ⬇️ initialPosts is now empty (first, second, third removed)
  const initialPosts = [];

  const favList = document.getElementById('favList');
  const feed = document.getElementById('feed');
  const mediaInput = document.getElementById('mediaInput');
  const previewWrap = document.getElementById('previewWrap');
  const tweetText = document.getElementById('tweetText');
  const postBtn = document.getElementById('postBtn');

  function renderFavs(){
    favList.innerHTML = '';
    favorites.forEach(f=>{
      const el = document.createElement('div');
      el.className = 'contact';
      el.innerHTML = `<img src="${f.avatar}" alt="${f.name}" /><div style="display:flex;flex-direction:column"><div style="font-weight:700">${f.name}</div><div style="font-size:12px;color:var(--muted)">${f.handle}</div></div>`;
      favList.appendChild(el);
    });
  }

  let posts = JSON.parse(localStorage.getItem('skyPosts')) || [...initialPosts];

  function savePosts(){ localStorage.setItem('skyPosts', JSON.stringify(posts)); }

  function renderFeed(){
    feed.innerHTML = '';
    posts.forEach(post=>{
      const card = document.createElement('article');
      card.className = 'post';
      card.innerHTML = `
        <div class="head">
          <div class="user">
            <img src="${post.avatar || 'profile.jpg'}" alt="${post.user}" />
            <div class="meta">
              <div class="name">${post.user} <span style="color:var(--muted);font-weight:600;margin-left:8px">${post.handle}</span></div>
              <div class="time">${post.time}</div>
            </div>
          </div>
          <div class="dots">⋯</div>
        </div>
        <div class="content">${escapeHtml(post.text || '')}</div>
      `;

      if(post.media && post.media.length){
        if(post.media.length > 2){
          const slider = document.createElement('div');
          slider.className = 'media-slider';
          const track = document.createElement('div');
          track.className = 'media-track';

          post.media.forEach(src=>{
            const slide = document.createElement('div');
            slide.className = 'media-slide';
            if(isVideoFile(src)){
              const v = document.createElement('video'); v.src = src; v.controls = true;
              slide.appendChild(v);
            } else {
              const img = document.createElement('img'); img.src = src;
              slide.appendChild(img);
            }
            track.appendChild(slide);
          });

          const prev = document.createElement('button');
          prev.className = 'slider-btn prev';
          prev.innerHTML = '‹';
          const next = document.createElement('button');
          next.className = 'slider-btn next';
          next.innerHTML = '›';

          let currentIndex = 0;
          function updateSlider(){ track.style.transform = `translateX(-${currentIndex * 100}%)`; }
          prev.addEventListener('click', ()=>{ if(currentIndex > 0){ currentIndex--; updateSlider(); }});
          next.addEventListener('click', ()=>{ if(currentIndex < post.media.length - 1){ currentIndex++; updateSlider(); }});

          slider.appendChild(prev);
          slider.appendChild(track);
          slider.appendChild(next);
          card.appendChild(slider);

        } else {
          const mediaWrap = document.createElement('div');
          mediaWrap.className = 'media';
          post.media.forEach(src=>{
            if(isVideoFile(src)){
              const v=document.createElement('video'); v.src=src; v.controls=true; mediaWrap.appendChild(v);
            } else {
              const img=document.createElement('img'); img.src=src; mediaWrap.appendChild(img);
            }
          });
          card.appendChild(mediaWrap);
        }
      }
      feed.appendChild(card);
    });
  }

  function isVideoFile(fname){ return /\.(mp4|webm|ogg|mov)$/i.test(fname); }
  function escapeHtml(text){ return text.replace(/[&<>"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

  let selectedFiles = [];
  mediaInput.addEventListener('change', e=>{
    selectedFiles = Array.from(e.target.files).slice(0,4);
    previewWrap.innerHTML = '';
    selectedFiles.forEach(file=>{
      const reader = new FileReader();
      reader.onload = function(ev){
        if(file.type.startsWith('video/')){
          const v=document.createElement('video'); v.src=ev.target.result; v.controls=true; v.className='two'; previewWrap.appendChild(v);
        } else {
          const img=document.createElement('img'); img.src=ev.target.result; img.className='two'; previewWrap.appendChild(img);
        }
      }
      reader.readAsDataURL(file);
    });
  });

  postBtn.addEventListener('click', ()=>{
    const text = tweetText.value.trim();
    if(!text && selectedFiles.length === 0){ alert('Please add text or media to post.'); return; }

    const mediaData = [];
    const promises = selectedFiles.map(file=>{
      return new Promise(res=>{
        const reader = new FileReader();
        reader.onload = e=>{
          mediaData.push(e.target.result);
          res();
        };
        reader.readAsDataURL(file);
      });
    });

    Promise.all(promises).then(()=>{
      posts.unshift({id:Date.now(),avatar:'images/profilephoto1.png',user:'Rishikesh Shedge',handle:'@rishikesh',time:'now',text,media:mediaData});
      savePosts();
      renderFeed();
      tweetText.value=''; selectedFiles=[]; mediaInput.value=''; previewWrap.innerHTML='';
    });
  });

  renderFavs();
  renderFeed();
});
</script>
</body>
</html>
